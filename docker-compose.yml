version: '3.2'
services:
    plex:
        image: linuxserver/plex
        container_name: plex
        volumes:
            - ./plex-config:/config
            - ./plex-transcode:/data/transcode
            # Media dirs injected here with override config
        network_mode: host
        environment:
            - VERSION=latest
            - TZ=Europe/Brussels
            - PUID=1000
            - PGID=1000
        ports:
            - 32400:32400

    transmission:
        image: linuxserver/transmission
        container_name: transmission
        environment:
          - PUID=1000
          - PGID=1000
          - TZ=Europe/Brussels
          - USER=admin
          - PASS=admin
        volumes:
          - ./transmission-config:/config
          - ./transmission-settings.json:/config/settings.json
          - type: bind
            source: ${TRANSMISSION_DIR}/downloads
            target: /downloads
          - type: bind
            source: ${TRANSMISSION_DIR}/watch
            target: /watch
        ports:
          - 51413:51413
          - 51413:51413/udp
        restart: unless-stopped
        depends_on:
            - plex

    bazarr:
        image: linuxserver/bazarr
        container_name: bazarr
        environment:
            - TZ=Europe/Brussels
            - PUID=1000
            - PGID=1000
        volumes:
            - ./bazarr-config:/config
            - ./bazarr-config.ini:/config/config/config.ini
            # Media dirs injected here with override config
        depends_on:
            - plex

    radarr:
        image: linuxserver/radarr
        container_name: radarr
        volumes:
            - ./radarr-config:/config
            - ./radarr-config.xml:/config/config.xml
            - type: bind
              source: ${TRANSMISSION_DIR}/downloads
              target: /downloads
            # Media dirs injected here with override config
        environment:
            - TZ=Europe/Brussels
            - PUID=1000
            - PGID=1000
        depends_on:
            - transmission
    
#    lidarr:
#        image: linuxserver/lidarr
#        container_name: lidarr
#        environment:
#            - PUID=1000
#            - PGID=1000
#            - TZ=Europe/Brussels
#        volumes:
#            - ./lidarr-config:/config
#            - ./lidarr-config.xml:/config/config.xml
#            - type: bind
#              source: ${TRANSMISSION_DIR}/downloads
#              target: /downloads
#            # Media dirs injected here with override config
#        depends_on:
#            - transmission
#        ports:
#            - 8686:8686

    sonarr:
        image: linuxserver/sonarr
        container_name: sonarr
        environment:
            - TZ=Europe/Brussels
            - PUID=1000
            - PGID=1000
        volumes:
            - ./sonarr-config:/config
            - ./sonarr-config.xml:/config/config.xml
            - type: bind
              source: ${TRANSMISSION_DIR}/downloads
              target: /downloads
            # Media dirs injected here with override config
        depends_on:
            - transmission

    jackett:
        image: linuxserver/jackett
        container_name: jackett
        environment:
            - TZ=Europe/Brussels
            - PUID=1000
            - PGID=1000
        volumes:
            - ./jackett/ServerConfig.json:/config/Jackett/ServerConfig.json
            - ./jackett/jackett-config:/config
            - type: bind
              source: ${TRANSMISSION_DIR}/downloads
              target: /downloads
        depends_on:
            - transmission

    nginx-media:
        image: nginx
        container_name: nginx-media
        volumes:
            - ./nginx.conf:/etc/nginx/nginx.conf:ro
        ports:
            - 8080:8080
        depends_on:
            - transmission
            - plex
            - bazarr
            - radarr
            - sonarr
#            - lidarr
            - jackett
