version: '3'
services:
    plex:
        image: linuxserver/plex
        container_name: plex
        volumes:
            - ./plex-config:/config
            - ./plex-transcode:/data/transcode
            # Media dirs injected here with override config
        network_mode: host
        restart: always
        environment:
            - VERSION=latest
            - TZ=Europe/Brussels
            - PUID=1000
            - PGID=1000
        ports:
            - 32400:32400

    transmission:
        image: linuxserver/transmission
        container_name: transmission
        environment:
          - PUID=1000
          - PGID=1000
          - TZ=Europe/Brussels
          - USER=admin
          - PASS=admin
        volumes:
          - ./transmission-config:/config
          - ./transmission/downloads:/downloads
          - ./transmission/watch:/watch
        ports:
          - 51413:51413
          - 51413:51413/udp
        restart: unless-stopped

    bazarr:
        image: linuxserver/bazarr
        container_name: bazarr
        environment:
            - TZ=Europe/Brussels
            - PUID=1000
            - PGID=1000
        volumes:
            - ./bazarr-config:/config
            - ./bazarr-config.ini:/config/config/config.ini
            - ${MEDIA_DIR}/Movies:/movies
            - ${MEDIA_DIR}/TV Shows:/tv

    radarr:
        image: linuxserver/radarr
        container_name: radarr
        volumes:
            - ./radarr-config:/config
            - ./radarr-config.xml:/config/config.xml
            - ${MEDIA_DIR}/Movies:/movies
            - ./transmission/downloads:/downloads
        environment:
            - TZ=Europe/Brussels
            - PUID=1000
            - PGID=1000
        depends_on:
            - transmission

    sonarr:
        image: linuxserver/sonarr
        container_name: sonarr
        environment:
            - TZ=Europe/Brussels
            - PUID=1000
            - PGID=1000
        volumes:
            - ./sonarr-config:/config
            - ./sonarr-config.xml:/config/config.xml
            - ${MEDIA_DIR}/TV Shows:/tv
            - ./transmission/downloads:/downloads
        depends_on:
            - transmission

    nginx:
        image: nginx
        container_name: nginx
        volumes:
            - ./nginx.conf:/etc/nginx/nginx.conf:ro
        ports:
            - 8080:8080
        depends_on:
            - transmission
            - plex
            - bazarr
            - radarr
            - sonarr
